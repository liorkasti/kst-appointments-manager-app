{"ast":null,"code":"import dayjs from 'dayjs';\nexport function appointmentInPast(appointmentData) {\n  const now = dayjs();\n  return dayjs(appointmentData.dateTime) < now;\n}\nexport function getAppointmentColor(appointmentData, userId) {\n  const taken = !!appointmentData.userId;\n  if (taken || appointmentInPast(appointmentData)) {\n    const textColor = 'black';\n    const bgColor = appointmentData.userId === userId ? 'white' : 'gray.300';\n    return [textColor, bgColor];\n  }\n  const textColor = 'white';\n  switch (appointmentData.treatmentName.toLowerCase()) {\n    case 'massage':\n      return [textColor, 'purple.700'];\n    case 'scrub':\n      return [textColor, 'blue.700'];\n    case 'facial':\n      return [textColor, 'green.700'];\n    default:\n      return [textColor, 'black'];\n  }\n}\nexport function getAvailableAppointments(appointments, user) {\n  // clone so as not to mutate argument directly\n  const filteredAppointments = {\n    ...appointments\n  };\n\n  // only keep appointments that are open (or taken by the logged-in user) and are not in the past)\n  Object.keys(filteredAppointments).forEach(date => {\n    filteredAppointments[date] = filteredAppointments[date].filter(appointment => (!appointment.userId || appointment.userId === (user === null || user === void 0 ? void 0 : user.id)) && !appointmentInPast(appointment));\n  });\n  return filteredAppointments;\n}","map":{"version":3,"names":["dayjs","appointmentInPast","appointmentData","now","dateTime","getAppointmentColor","userId","taken","textColor","bgColor","treatmentName","toLowerCase","getAvailableAppointments","appointments","user","filteredAppointments","Object","keys","forEach","date","filter","appointment","id"],"sources":["C:/Users/kasti/workspace/REACT-QUERY/base-lazy-days/client/src/components/appointments/utils.ts"],"sourcesContent":["import dayjs from 'dayjs';\r\n\r\nimport type {\r\n  Appointment,\r\n  AppointmentDateMap,\r\n  User,\r\n} from '../../../../shared/types';\r\n\r\nexport function appointmentInPast(appointmentData: Appointment): boolean {\r\n  const now = dayjs();\r\n  return dayjs(appointmentData.dateTime) < now;\r\n}\r\n\r\nexport function getAppointmentColor(\r\n  appointmentData: Appointment,\r\n  userId: number | undefined,\r\n): [string, string] {\r\n  const taken = !!appointmentData.userId;\r\n\r\n  if (taken || appointmentInPast(appointmentData)) {\r\n    const textColor = 'black';\r\n    const bgColor = appointmentData.userId === userId ? 'white' : 'gray.300';\r\n    return [textColor, bgColor];\r\n  }\r\n  const textColor = 'white';\r\n\r\n  switch (appointmentData.treatmentName.toLowerCase()) {\r\n    case 'massage':\r\n      return [textColor, 'purple.700'];\r\n    case 'scrub':\r\n      return [textColor, 'blue.700'];\r\n    case 'facial':\r\n      return [textColor, 'green.700'];\r\n    default:\r\n      return [textColor, 'black'];\r\n  }\r\n}\r\n\r\nexport function getAvailableAppointments(\r\n  appointments: AppointmentDateMap,\r\n  user: User | null,\r\n): AppointmentDateMap {\r\n  // clone so as not to mutate argument directly\r\n  const filteredAppointments = { ...appointments };\r\n\r\n  // only keep appointments that are open (or taken by the logged-in user) and are not in the past)\r\n  Object.keys(filteredAppointments).forEach((date) => {\r\n    filteredAppointments[date] = filteredAppointments[date].filter(\r\n      (appointment: Appointment) =>\r\n        (!appointment.userId || appointment.userId === user?.id) &&\r\n        !appointmentInPast(appointment),\r\n    );\r\n  });\r\n\r\n  return filteredAppointments;\r\n}\r\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AAQzB,OAAO,SAASC,iBAAiBA,CAACC,eAA4B,EAAW;EACvE,MAAMC,GAAG,GAAGH,KAAK,EAAE;EACnB,OAAOA,KAAK,CAACE,eAAe,CAACE,QAAQ,CAAC,GAAGD,GAAG;AAC9C;AAEA,OAAO,SAASE,mBAAmBA,CACjCH,eAA4B,EAC5BI,MAA0B,EACR;EAClB,MAAMC,KAAK,GAAG,CAAC,CAACL,eAAe,CAACI,MAAM;EAEtC,IAAIC,KAAK,IAAIN,iBAAiB,CAACC,eAAe,CAAC,EAAE;IAC/C,MAAMM,SAAS,GAAG,OAAO;IACzB,MAAMC,OAAO,GAAGP,eAAe,CAACI,MAAM,KAAKA,MAAM,GAAG,OAAO,GAAG,UAAU;IACxE,OAAO,CAACE,SAAS,EAAEC,OAAO,CAAC;EAC7B;EACA,MAAMD,SAAS,GAAG,OAAO;EAEzB,QAAQN,eAAe,CAACQ,aAAa,CAACC,WAAW,EAAE;IACjD,KAAK,SAAS;MACZ,OAAO,CAACH,SAAS,EAAE,YAAY,CAAC;IAClC,KAAK,OAAO;MACV,OAAO,CAACA,SAAS,EAAE,UAAU,CAAC;IAChC,KAAK,QAAQ;MACX,OAAO,CAACA,SAAS,EAAE,WAAW,CAAC;IACjC;MACE,OAAO,CAACA,SAAS,EAAE,OAAO,CAAC;EAAC;AAElC;AAEA,OAAO,SAASI,wBAAwBA,CACtCC,YAAgC,EAChCC,IAAiB,EACG;EACpB;EACA,MAAMC,oBAAoB,GAAG;IAAE,GAAGF;EAAa,CAAC;;EAEhD;EACAG,MAAM,CAACC,IAAI,CAACF,oBAAoB,CAAC,CAACG,OAAO,CAAEC,IAAI,IAAK;IAClDJ,oBAAoB,CAACI,IAAI,CAAC,GAAGJ,oBAAoB,CAACI,IAAI,CAAC,CAACC,MAAM,CAC3DC,WAAwB,IACvB,CAAC,CAACA,WAAW,CAACf,MAAM,IAAIe,WAAW,CAACf,MAAM,MAAKQ,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEQ,EAAE,MACvD,CAACrB,iBAAiB,CAACoB,WAAW,CAAC,CAClC;EACH,CAAC,CAAC;EAEF,OAAON,oBAAoB;AAC7B"},"metadata":{},"sourceType":"module"}